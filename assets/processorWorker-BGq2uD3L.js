(function(){"use strict";onmessage=d=>{const n=d.data.data,l=d.data.lookupTable,a={networkToAdd:[],lookupTable:l,memberToAdd:[],generatedData:JSON.parse(d.data.generatedData),a:d.data.a};n.organizations.forEach(o=>{a.generatedData.organizations.push(o),a.networkToAdd.push({type:"node",data:{id:a.a,label:o.o,color:"#0644F1"}});const e=o.DN.split(":")[0],s=a.a;l[e+",OU=CHCommunity,DC=CPI,O=BAG,C=ch"]||(a.a++,a.networkToAdd.push({type:"node",data:{id:a.a,label:e,shape:"box",color:"#f0003c"}}),a.networkToAdd.push({type:"edge",data:{to:-1,from:a.a,length:400}}),a.lookupTable[e+",OU=CHCommunity,DC=CPI,O=BAG,C=ch"]=a.a),a.lookupTable[o.DN]=s,o.businessCategory.match(/264358009|288565001|Hospital|35971002/i)&&a.networkToAdd.push({type:"edge",data:{to:a.lookupTable[e+",OU=CHCommunity,DC=CPI,O=BAG,C=ch"],from:s,length:400}}),a.a++}),n.professionals.forEach(o=>{a.generatedData.professionals.push(o),a.networkToAdd.push({type:"node",data:{id:a.a,label:o.displayName,color:"#0399AC"}}),a.lookupTable[o.DN]=a.a,a.a++});const r=[];n.relationships.forEach(o=>{let e=a.generatedData.organizations.find(t=>t.DN===o.owner);e||(e=a.generatedData.professionals.find(t=>t.DN===o.owner));const s=o.member.split(";");e&&s.forEach(t=>{if(!r.includes(t)){a.memberToAdd.push({o:e,m:t});const p=a.lookupTable[t],u=a.lookupTable[o.owner];u&&p&&a.networkToAdd.push({type:"edge",data:{to:u,from:p,length:200}})}r.push(t)})}),postMessage(a)}})();
